Please go to the legacy codebase in the following location. /\_eve\_/projects/scrypto-failed/scrypto-legacy-for-examples-read-only Very critical! This should only be seen as a reference point, no code should be copied from there directly. Code can be used only if it conforms to our standards. If in doubt, immediately stop and raise a question to the user. The legacy codebase contains working versions of certain elements that we need in this app, but it is completely wrongly factored and not sustainable. But the logic and the fundamental principles are in most cases sound. For this task, please go and extract the logic and process of how to save files securely to Supabase buckets. This was done in the user profile section as well as in the documents upload section of personal information. Take a note of how the profile picture works and how the document upload feature works. They should essentially use the same configuration and methods. Suggest to determine if this can be included into a layout or some sort of a component that can facilitate all file uploads and image uploads to Supabase as well as retrieving and displaying them as a thumbnails or small images back in the application. The outcome of this task is a MD document to be saved in the AI implementation folder with a complete guide and instruction set with relevant code pieces of how to do the profile picture as well as the document upload features in this app. Any code and examples seen in the legacy codebase that seems feasible to be used must still also be checked against best practices, our standards, and a search online to confirm that this is the best possible method to use. Again mentioning this that this codebase is purely as a reference point and a guide, not to be used as a version of truth, just as an example, and must be vetted. 

